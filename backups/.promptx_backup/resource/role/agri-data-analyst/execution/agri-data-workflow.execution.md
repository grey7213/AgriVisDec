<execution>
  <constraint>
    ## 农业数据分析技术约束
    - **数据采集频率限制**：避免对目标网站造成过大负载，遵循爬虫礼仪
    - **数据存储容量**：MySQL数据库的存储和查询性能优化
    - **实时性要求**：天气数据需要准实时更新，价格数据日更新即可
    - **用户并发限制**：Flask应用的并发处理能力和资源消耗控制
    - **移动端适配**：响应式设计确保在各种设备上的可用性
  </constraint>

  <rule>
    ## 农业数据处理强制规则
    - **数据验证规则**：所有采集的数据必须经过格式验证和合理性检查
    - **更新策略规则**：天气数据每4小时更新，价格数据每日凌晨更新
    - **异常处理规则**：数据采集失败时必须有降级方案和用户提示
    - **安全访问规则**：所有外部API调用必须设置超时和重试机制
    - **数据备份规则**：关键数据必须定期备份，确保数据安全
  </rule>

  <guideline>
    ## 农业数据分析指导原则
    - **用户导向原则**：所有功能设计都要从农户的实际需求出发
    - **简洁实用原则**：界面设计要简洁明了，避免复杂的操作流程
    - **数据驱动原则**：决策建议要基于充分的数据分析，避免主观判断
    - **持续优化原则**：根据用户反馈和使用数据不断改进系统功能
    - **成本控制原则**：在保证功能的前提下，优化系统资源消耗
  </guideline>

  <process>
    ## 农业数据分析完整工作流程
    
    ### Phase 1: 数据采集与预处理
    ```mermaid
    flowchart TD
        A[启动定时任务] --> B{检查数据源状态}
        B -->|正常| C[执行数据爬取]
        B -->|异常| D[记录错误日志]
        C --> E[数据格式验证]
        E -->|通过| F[数据清洗处理]
        E -->|失败| G[数据修复尝试]
        F --> H[存储到数据库]
        G --> I{修复成功?}
        I -->|是| F
        I -->|否| J[使用历史数据]
        D --> K[发送告警通知]
        H --> L[更新数据状态]
        J --> L
        K --> L
    ```
    
    ### Phase 2: 数据分析与建模
    ```mermaid
    flowchart LR
        A[原始数据] --> B[特征工程]
        B --> C[趋势分析]
        C --> D[相关性分析]
        D --> E[预测建模]
        E --> F[结果验证]
        F --> G[生成报告]
        
        B --> H[异常检测]
        H --> I[数据质量评估]
        I --> J[清洗建议]
    ```
    
    ### Phase 3: 可视化与决策支持
    ```mermaid
    graph TD
        A[分析结果] --> B{用户类型}
        B -->|种植户| C[种植决策看板]
        B -->|采购商| D[价格趋势看板]
        B -->|管理员| E[系统监控看板]
        
        C --> F[ECharts图表渲染]
        D --> F
        E --> F
        
        F --> G[响应式布局]
        G --> H[移动端适配]
        H --> I[用户交互优化]
    ```
    
    ### Phase 4: 用户反馈与系统优化
    ```mermaid
    flowchart TD
        A[用户使用系统] --> B[收集使用数据]
        B --> C[分析用户行为]
        C --> D{发现问题?}
        D -->|是| E[问题分类处理]
        D -->|否| F[功能使用统计]
        E --> G[系统优化]
        F --> H[用户满意度调研]
        G --> I[版本更新]
        H --> J[功能改进建议]
        I --> K[效果评估]
        J --> L[产品路线图更新]
        K --> M[持续监控]
        L --> M
    ```
  </process>

  <criteria>
    ## 农业数据分析质量标准
    
    ### 数据质量标准
    - ✅ 数据准确率 ≥ 95%
    - ✅ 数据完整性 ≥ 90%
    - ✅ 数据时效性：天气数据延迟 ≤ 4小时
    - ✅ 数据一致性：多源数据格式统一
    
    ### 系统性能标准
    - ✅ 页面加载时间 ≤ 3秒
    - ✅ 数据库查询响应 ≤ 1秒
    - ✅ 系统可用性 ≥ 99%
    - ✅ 并发用户支持 ≥ 100人
    
    ### 用户体验标准
    - ✅ 界面操作直观易懂
    - ✅ 移动端完美适配
    - ✅ 关键信息突出显示
    - ✅ 错误提示友好明确
    
    ### 业务价值标准
    - ✅ 决策准确率提升 ≥ 20%
    - ✅ 用户活跃度 ≥ 70%
    - ✅ 功能使用覆盖率 ≥ 80%
    - ✅ 用户满意度 ≥ 85%
  </criteria>
</execution>
